<odoo>
    <record id="view_supplier_pricelist_import_wizard" model="ir.ui.view">
        <field name="name">supplier.pricelist.import.wizard.form</field>
        <field name="model">supplier.pricelist.import.wizard</field>
        <field name="arch" type="xml">
            <form string="Importeer prijslijst">
                <!-- Stap 1: Leverancier en CSV selectie (ALLEEN als niet bevestigd) -->
                <group invisible="csv_confirmed">
                    <group>
                        <field name="supplier_id" required="1"/>
                        <field name="file_data" filename="file_name"/>
                        <field name="file_name" invisible="1"/>
                    </group>
                    <group>
                        <field name="csv_headers" readonly="1" invisible="not file_data"/>
                    </group>
                </group>
                
                <!-- CSV Preview (ALLEEN als uploaded maar nog niet bevestigd) -->
                <group invisible="not file_data or csv_confirmed">
                    <div class="col-12">
                        <h4>CSV Preview - Eerste 5 regels:</h4>
                        <field name="csv_preview" nolabel="1"/>
                    </div>
                </group>
                
                <!-- Bevestigde status (ALLEEN als bevestigd) -->
                <group invisible="not csv_confirmed">
                    <group>
                        <field name="supplier_id" readonly="1"/>
                        <field name="csv_headers" readonly="1"/>
                    </group>
                </group>
                
                <!-- Bevestiging sectie -->
                <div class="alert alert-success" role="alert" invisible="not csv_confirmed">
                    <strong>âœ“ CSV Bevestigd!</strong><br/>
                    Partner/Leverancier kolom is automatisch gevuld met: <strong><field name="supplier_id" readonly="1" nolabel="1"/></strong><br/>
                    <field name="partner_column_filled" readonly="1" invisible="1"/>
                    <br/>
                    <strong>Volgende stap:</strong> Download de CSV en upload handmatig in Odoo's import.
                </div>
                
                <!-- Instructies -->
                <div class="alert alert-info" role="alert" invisible="file_data">
                    <strong>Stappen:</strong><br/>
                    1. Selecteer een leverancier<br/>
                    2. Upload een CSV bestand<br/>
                    3. Bekijk de preview en bevestig<br/>
                    4. Start de import
                </div>
                
                <div class="alert alert-warning" role="alert" invisible="not file_data or csv_confirmed">
                    <strong>Controleer de preview hierboven en bevestig als de data correct is.</strong><br/>
                    De Partner/Leverancier kolom wordt automatisch toegevoegd en gevuld met: <strong><field name="supplier_id" readonly="1" nolabel="1"/></strong>
                </div>

                <!-- Hidden fields -->
                <field name="csv_confirmed" invisible="1"/>

                <footer>
                    <!-- Bevestig CSV knop -->
                    <button string="âœ“ Bevestig CSV"
                            type="object"
                            name="action_confirm_csv"
                            class="btn-success"
                            invisible="not file_data or not supplier_id or csv_confirmed"/>
                    
                    <!-- Download CSV met partner_id (DEBUG/TEST) -->
                    <button string="ðŸ’¾ Download CSV met partner_id"
                            type="object"
                            name="action_download_csv_with_partner"
                            class="btn-info"
                            invisible="not csv_confirmed"
                            help="Download de CSV met partner_id kolom voor handmatige test"/>
                    
                    <!-- Auto-load in import knop -->
                    <button string="ðŸš€ Open in Import"
                            type="object"
                            name="action_load_in_odoo_import"
                            class="btn-primary"
                            invisible="not csv_confirmed"
                            help="Open automatisch in Odoo's import wizard met CSV geladen"/>
                    
                    <!-- Reset knop -->
                    <button string="ðŸ”„ Nieuwe CSV"
                            type="object"
                            name="action_reset"
                            class="btn-secondary"
                            invisible="not csv_confirmed"/>
                    
                    <button string="Annuleren" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>
</odoo>
